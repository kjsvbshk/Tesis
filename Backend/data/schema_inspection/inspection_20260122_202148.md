# Inspección Comprehensiva de Esquemas de Base de Datos

**Fecha**: 2026-01-22 20:21:48


## Esquema: `app`

**Total de tablas**: 24


### Tablas


#### `administrators`

- **Columnas**: 10

- **Primary Key**: `id`

- **Filas**: 1

- **Columnas principales**:
  - `id`: integer NOT NULL
  - `user_account_id`: integer NOT NULL
  - `role_id`: integer NOT NULL
  - `first_name`: character varying NOT NULL
  - `last_name`: character varying NOT NULL
  - `employee_id`: character varying NULL
  - `department`: character varying NULL
  - `phone`: character varying NULL
  - `created_at`: timestamp with time zone NULL
  - `updated_at`: timestamp with time zone NULL

#### `audit_log`

- **Columnas**: 10

- **Primary Key**: `id`

- **Filas**: 67

- **Columnas principales**:
  - `id`: integer NOT NULL
  - `organization_id`: integer NULL
  - `actor_user_id`: integer NULL
  - `action`: character varying NOT NULL
  - `resource_type`: character varying NULL
  - `resource_id`: integer NULL
  - `before`: text NULL
  - `after`: text NULL
  - `audit_metadata`: text NULL
  - `created_at`: timestamp with time zone NULL

#### `bets`

- **Columnas**: 17

- **Primary Key**: `['id', 'id']`

- **Filas**: 14

- **Columnas principales**:
  - `id`: integer NOT NULL
  - `user_id`: integer NOT NULL
  - `game_id`: integer NOT NULL
  - `bet_type`: USER-DEFINED NOT NULL
  - `bet_amount`: double precision NOT NULL
  - `odds`: double precision NOT NULL
  - `potential_payout`: double precision NOT NULL
  - `selected_team_id`: integer NULL
  - `spread_value`: double precision NULL
  - `over_under_value`: double precision NULL
  - ... y 7 más

#### `clients`

- **Columnas**: 10

- **Primary Key**: `id`

- **Filas**: 7

- **Columnas principales**:
  - `id`: integer NOT NULL
  - `user_account_id`: integer NOT NULL
  - `role_id`: integer NOT NULL
  - `credits`: numeric NOT NULL
  - `first_name`: character varying NULL
  - `last_name`: character varying NULL
  - `phone`: character varying NULL
  - `date_of_birth`: date NULL
  - `created_at`: timestamp with time zone NULL
  - `updated_at`: timestamp with time zone NULL

#### `email_verification_codes`

- **Columnas**: 8

- **Primary Key**: `id`

- **Filas**: 1

- **Columnas principales**:
  - `id`: integer NOT NULL
  - `email`: character varying NOT NULL
  - `code`: character varying NOT NULL
  - `purpose`: character varying NOT NULL
  - `is_verified`: boolean NOT NULL
  - `created_at`: timestamp with time zone NULL
  - `expires_at`: timestamp with time zone NOT NULL
  - `verified_at`: timestamp with time zone NULL

#### `idempotency_keys`

- **Columnas**: 6

- **Primary Key**: `id`

- **Filas**: 10

- **Columnas principales**:
  - `id`: integer NOT NULL
  - `request_key`: character varying NOT NULL
  - `request_id`: integer NULL
  - `response_data`: text NULL
  - `created_at`: timestamp with time zone NULL
  - `expires_at`: timestamp with time zone NULL

#### `model_versions`

- **Columnas**: 6

- **Primary Key**: `id`

- **Filas**: 1

- **Columnas principales**:
  - `id`: integer NOT NULL
  - `version`: character varying NOT NULL
  - `is_active`: boolean NOT NULL
  - `model_metadata`: text NULL
  - `description`: text NULL
  - `created_at`: timestamp with time zone NULL

#### `odds_lines`

- **Columnas**: 7

- **Primary Key**: `id`

- **Filas**: 0

- **Columnas principales**:
  - `id`: integer NOT NULL
  - `snapshot_id`: integer NOT NULL
  - `provider_id`: integer NOT NULL
  - `line_code`: character varying NOT NULL
  - `price`: numeric NOT NULL
  - `line_metadata`: text NULL
  - `created_at`: timestamp with time zone NULL

#### `odds_snapshots`

- **Columnas**: 3

- **Primary Key**: `id`

- **Filas**: 11

- **Columnas principales**:
  - `id`: integer NOT NULL
  - `request_id`: integer NOT NULL
  - `taken_at`: timestamp with time zone NOT NULL

#### `operators`

- **Columnas**: 11

- **Primary Key**: `id`

- **Filas**: 0

- **Columnas principales**:
  - `id`: integer NOT NULL
  - `user_account_id`: integer NOT NULL
  - `role_id`: integer NOT NULL
  - `first_name`: character varying NOT NULL
  - `last_name`: character varying NOT NULL
  - `employee_id`: character varying NULL
  - `department`: character varying NULL
  - `phone`: character varying NULL
  - `shift`: character varying NULL
  - `created_at`: timestamp with time zone NULL
  - ... y 1 más

#### `outbox`

- **Columnas**: 5

- **Primary Key**: `id`

- **Filas**: 47

- **Columnas principales**:
  - `id`: integer NOT NULL
  - `topic`: character varying NOT NULL
  - `payload`: text NOT NULL
  - `created_at`: timestamp with time zone NULL
  - `published_at`: timestamp with time zone NULL

#### `permissions`

- **Columnas**: 6

- **Primary Key**: `id`

- **Filas**: 13

- **Columnas principales**:
  - `id`: integer NOT NULL
  - `code`: character varying NOT NULL
  - `name`: character varying NOT NULL
  - `description`: text NULL
  - `scope`: character varying NULL
  - `created_at`: timestamp with time zone NULL

#### `predictions`

- **Columnas**: 7

- **Primary Key**: `id`

- **Filas**: 10

- **Columnas principales**:
  - `id`: integer NOT NULL
  - `request_id`: integer NOT NULL
  - `model_version_id`: integer NOT NULL
  - `score`: text NOT NULL
  - `latency_ms`: double precision NULL
  - `telemetry`: text NULL
  - `created_at`: timestamp with time zone NULL

#### `provider_endpoints`

- **Columnas**: 7

- **Primary Key**: `id`

- **Filas**: 0

- **Columnas principales**:
  - `id`: integer NOT NULL
  - `provider_id`: integer NOT NULL
  - `purpose`: character varying NOT NULL
  - `url`: character varying NOT NULL
  - `method`: character varying NOT NULL
  - `headers`: text NULL
  - `created_at`: timestamp with time zone NULL

#### `providers`

- **Columnas**: 10

- **Primary Key**: `id`

- **Filas**: 0

- **Columnas principales**:
  - `id`: integer NOT NULL
  - `code`: character varying NOT NULL
  - `name`: character varying NOT NULL
  - `is_active`: boolean NOT NULL
  - `timeout_seconds`: integer NOT NULL
  - `max_retries`: integer NOT NULL
  - `circuit_breaker_threshold`: integer NOT NULL
  - `provider_metadata`: text NULL
  - `created_at`: timestamp with time zone NULL
  - `updated_at`: timestamp with time zone NULL

#### `requests`

- **Columnas**: 12

- **Primary Key**: `id`

- **Filas**: 33

- **Columnas principales**:
  - `id`: integer NOT NULL
  - `organization_id`: integer NULL
  - `user_id`: integer NULL
  - `event_id`: integer NULL
  - `market_id`: integer NULL
  - `request_key`: character varying NOT NULL
  - `status`: USER-DEFINED NOT NULL
  - `request_metadata`: text NULL
  - `error_message`: text NULL
  - `created_at`: timestamp with time zone NULL
  - ... y 2 más

#### `role_permissions`

- **Columnas**: 3

- **Primary Key**: `['role_id', 'permission_id']`

- **Filas**: 22

- **Columnas principales**:
  - `role_id`: integer NOT NULL
  - `permission_id`: integer NOT NULL
  - `created_at`: timestamp with time zone NULL

#### `roles`

- **Columnas**: 5

- **Primary Key**: `id`

- **Filas**: 4

- **Columnas principales**:
  - `id`: integer NOT NULL
  - `code`: character varying NOT NULL
  - `name`: character varying NOT NULL
  - `description`: text NULL
  - `created_at`: timestamp with time zone NULL

#### `transactions`

- **Columnas**: 9

- **Primary Key**: `id`

- **Filas**: 31

- **Columnas principales**:
  - `id`: integer NOT NULL
  - `user_id`: integer NOT NULL
  - `bet_id`: integer NULL
  - `transaction_type`: USER-DEFINED NOT NULL
  - `amount`: double precision NOT NULL
  - `balance_before`: double precision NOT NULL
  - `balance_after`: double precision NOT NULL
  - `description`: character varying NULL
  - `created_at`: timestamp with time zone NULL

#### `user_accounts`

- **Columnas**: 8

- **Primary Key**: `id`

- **Filas**: 8

- **Columnas principales**:
  - `id`: integer NOT NULL
  - `username`: character varying NOT NULL
  - `email`: character varying NOT NULL
  - `hashed_password`: character varying NOT NULL
  - `is_active`: boolean NOT NULL
  - `created_at`: timestamp with time zone NULL
  - `updated_at`: timestamp with time zone NULL
  - `avatar_url`: character varying NULL

#### `user_roles`

- **Columnas**: 5

- **Primary Key**: `id`

- **Filas**: 2

- **Columnas principales**:
  - `id`: integer NOT NULL
  - `user_id`: integer NOT NULL
  - `role_id`: integer NOT NULL
  - `is_active`: boolean NOT NULL
  - `created_at`: timestamp with time zone NULL

#### `user_sessions`

- **Columnas**: 12

- **Primary Key**: `id`

- **Filas**: 18

- **Columnas principales**:
  - `id`: integer NOT NULL
  - `user_account_id`: integer NOT NULL
  - `token_hash`: character varying NOT NULL
  - `device_info`: character varying NULL
  - `ip_address`: character varying NULL
  - `user_agent`: text NULL
  - `location`: character varying NULL
  - `is_active`: boolean NOT NULL
  - `last_activity`: timestamp with time zone NOT NULL
  - `created_at`: timestamp with time zone NOT NULL
  - ... y 2 más

#### `user_two_factor`

- **Columnas**: 8

- **Primary Key**: `id`

- **Filas**: 3

- **Columnas principales**:
  - `id`: integer NOT NULL
  - `user_account_id`: integer NOT NULL
  - `secret`: character varying NOT NULL
  - `is_enabled`: boolean NOT NULL
  - `backup_codes`: text NULL
  - `created_at`: timestamp with time zone NULL
  - `updated_at`: timestamp with time zone NULL
  - `enabled_at`: timestamp with time zone NULL

#### `users`

- **Columnas**: 9

- **Primary Key**: `id`

- **Filas**: 3

- **Columnas principales**:
  - `id`: integer NOT NULL
  - `username`: character varying NOT NULL
  - `email`: character varying NOT NULL
  - `hashed_password`: character varying NOT NULL
  - `rol`: character varying NOT NULL
  - `credits`: double precision NOT NULL
  - `is_active`: boolean NOT NULL
  - `created_at`: timestamp with time zone NULL
  - `updated_at`: timestamp with time zone NULL

### Foreign Keys

- `administrators.user_account_id` → `app.user_accounts.id`
- `administrators.role_id` → `app.roles.id`
- `audit_log.actor_user_id` → `app.users.id`
- `bets.user_id` → `app.users.id`
- `bets.user_id` → `app.user_accounts.id`
- `clients.role_id` → `app.roles.id`
- `clients.user_account_id` → `app.user_accounts.id`
- `odds_lines.snapshot_id` → `app.odds_snapshots.id`
- `odds_lines.provider_id` → `app.providers.id`
- `odds_snapshots.request_id` → `app.requests.id`
- `operators.role_id` → `app.roles.id`
- `operators.user_account_id` → `app.user_accounts.id`
- `predictions.request_id` → `app.requests.id`
- `predictions.model_version_id` → `app.model_versions.id`
- `provider_endpoints.provider_id` → `app.providers.id`
- `requests.user_id` → `app.users.id`
- `role_permissions.role_id` → `app.roles.id`
- `role_permissions.permission_id` → `app.permissions.id`
- `transactions.user_id` → `app.users.id`
- `transactions.user_id` → `app.user_accounts.id`
- ... y 4 más

## Esquema: `espn`

**Total de tablas**: 12


### Tablas


#### `bet_results`

- **Columnas**: 6

- **Primary Key**: `id`

- **Filas**: 0

- **Columnas principales**:
  - `id`: integer NOT NULL
  - `bet_id`: integer NOT NULL
  - `actual_payout`: numeric NULL
  - `result_notes`: text NULL
  - `settled_at`: timestamp with time zone NULL
  - `created_at`: timestamp with time zone NULL

#### `bet_selections`

- **Columnas**: 7

- **Primary Key**: `id`

- **Filas**: 30

- **Columnas principales**:
  - `id`: integer NOT NULL
  - `bet_id`: integer NOT NULL
  - `selected_team_id`: integer NULL
  - `spread_value`: numeric NULL
  - `over_under_value`: numeric NULL
  - `is_over`: boolean NULL
  - `created_at`: timestamp with time zone NULL

#### `bet_statuses`

- **Columnas**: 3

- **Primary Key**: `code`

- **Filas**: 4

- **Columnas principales**:
  - `code`: character varying NOT NULL
  - `name`: character varying NOT NULL
  - `description`: text NULL

#### `bet_types`

- **Columnas**: 3

- **Primary Key**: `code`

- **Filas**: 3

- **Columnas principales**:
  - `code`: character varying NOT NULL
  - `name`: character varying NOT NULL
  - `description`: text NULL

#### `bets`

- **Columnas**: 13

- **Primary Key**: `['id', 'id']`

- **Filas**: 41

- **Columnas principales**:
  - `id`: integer NOT NULL
  - `user_id`: integer NOT NULL
  - `game_id`: integer NOT NULL
  - `bet_type_code`: character varying NOT NULL
  - `bet_status_code`: character varying NOT NULL
  - `bet_amount`: numeric NOT NULL
  - `odds_id`: integer NULL
  - `odds_value`: numeric NOT NULL
  - `potential_payout`: numeric NOT NULL
  - `placed_at`: timestamp with time zone NULL
  - ... y 3 más

#### `game_odds`

- **Columnas**: 9

- **Primary Key**: `id`

- **Filas**: 0

- **Columnas principales**:
  - `id`: integer NOT NULL
  - `game_id`: integer NOT NULL
  - `odds_type`: character varying NOT NULL
  - `odds_value`: numeric NOT NULL
  - `line_value`: numeric NULL
  - `provider`: character varying NULL
  - `snapshot_time`: timestamp with time zone NULL
  - `created_at`: timestamp with time zone NULL
  - `updated_at`: timestamp with time zone NULL

#### `games`

- **Columnas**: 34

- **Primary Key**: `game_id`

- **Filas**: 1,237

- **Columnas principales**:
  - `game_id`: bigint NOT NULL
  - `fecha`: date NULL
  - `home_team`: character varying NULL
  - `away_team`: character varying NULL
  - `home_score`: double precision NULL
  - `away_score`: double precision NULL
  - `home_fg_pct`: double precision NULL
  - `home_3p_pct`: double precision NULL
  - `home_ft_pct`: double precision NULL
  - `home_reb`: double precision NULL
  - ... y 24 más

#### `injuries`

- **Columnas**: 5

- **Filas**: 92

- **Columnas principales**:
  - `team`: character varying NULL
  - `player`: character varying NULL
  - `position`: character varying NULL
  - `status`: character varying NULL
  - `description`: character varying NULL

#### `odds`

- **Columnas**: 7

- **Primary Key**: `game_id`

- **Filas**: 15

- **Columnas principales**:
  - `game_id`: character varying NOT NULL
  - `sport_key`: character varying NULL
  - `sport_title`: character varying NULL
  - `commence_time`: character varying NULL
  - `home_team`: character varying NULL
  - `away_team`: character varying NULL
  - `bookmakers`: jsonb NULL

#### `player_stats`

- **Columnas**: 28

- **Filas**: 1,533

- **Columnas principales**:
  - `rank`: bigint NULL
  - `player_id`: bigint NULL
  - `player_name`: character varying NULL
  - `season`: character varying NULL
  - `season_type`: character varying NULL
  - `scraped_at`: character varying NULL
  - `rk`: character varying NULL
  - `name`: character varying NULL
  - `pos`: character varying NULL
  - `gp`: bigint NULL
  - ... y 18 más

#### `team_stats_game`

- **Columnas**: 16

- **Primary Key**: `id`

- **Filas**: 2,474

- **Columnas principales**:
  - `id`: integer NOT NULL
  - `game_id`: integer NOT NULL
  - `team_id`: integer NOT NULL
  - `is_home`: boolean NOT NULL
  - `points`: integer NULL
  - `field_goal_percentage`: double precision NULL
  - `three_point_percentage`: double precision NULL
  - `free_throw_percentage`: double precision NULL
  - `rebounds`: integer NULL
  - `assists`: integer NULL
  - ... y 6 más

#### `teams`

- **Columnas**: 9

- **Primary Key**: `team_id`

- **Filas**: 30

- **Columnas principales**:
  - `team_id`: integer NOT NULL
  - `name`: character varying NOT NULL
  - `abbreviation`: character varying NOT NULL
  - `city`: character varying NOT NULL
  - `conference`: character varying NOT NULL
  - `division`: character varying NOT NULL
  - `logo_url`: character varying NULL
  - `created_at`: timestamp with time zone NULL
  - `updated_at`: timestamp with time zone NULL

### Foreign Keys

- `bet_results.bet_id` → `espn.bets.id`
- `bet_selections.selected_team_id` → `espn.teams.team_id`
- `bet_selections.bet_id` → `espn.bets.id`
- `bets.odds_id` → `espn.game_odds.id`
- `bets.game_id` → `espn.games.game_id`
- `bets.bet_type_code` → `espn.bet_types.code`
- `bets.bet_status_code` → `espn.bet_statuses.code`
- `team_stats_game.team_id` → `espn.teams.team_id`
- `team_stats_game.game_id` → `espn.games.game_id`

## Esquema: `ml`

**Total de tablas**: 1


### Tablas


#### `ml_ready_games`

- **Columnas**: 41

- **Primary Key**: `game_id`

- **Filas**: 1,237

- **Columnas principales**:
  - `game_id`: bigint NOT NULL
  - `fecha`: date NULL
  - `home_team`: character varying NULL
  - `away_team`: character varying NULL
  - `home_score`: double precision NULL
  - `away_score`: double precision NULL
  - `home_win`: boolean NULL
  - `point_diff`: double precision NULL
  - `home_fg_pct`: double precision NULL
  - `home_3p_pct`: double precision NULL
  - ... y 31 más

## Esquema: `premier_league`

**Total de tablas**: 3


### Tablas


#### `matches`

- **Columnas**: 12

- **Primary Key**: `match_id`

- **Filas**: 374

- **Columnas principales**:
  - `match_id`: character varying NOT NULL
  - `season`: integer NULL
  - `date`: date NULL
  - `home_team`: character varying NULL
  - `away_team`: character varying NULL
  - `home_score`: integer NULL
  - `away_score`: integer NULL
  - `status`: character varying NULL
  - `competition`: character varying NULL
  - `home_win`: integer NULL
  - ... y 2 más

#### `standings`

- **Columnas**: 12

- **Filas**: 20

- **Columnas principales**:
  - `season`: integer NULL
  - `date`: date NULL
  - `position`: integer NULL
  - `team_name`: integer NULL
  - `games_played`: integer NULL
  - `wins`: integer NULL
  - `draws`: integer NULL
  - `losses`: integer NULL
  - `goals_for`: integer NULL
  - `goals_against`: integer NULL
  - ... y 2 más

#### `team_stats`

- **Columnas**: 14

- **Filas**: 20

- **Columnas principales**:
  - `season`: integer NULL
  - `team_name`: character varying NULL
  - `date`: date NULL
  - `goals_per_game`: double precision NULL
  - `goals_against_per_game`: double precision NULL
  - `possession_pct`: double precision NULL
  - `shots_per_game`: double precision NULL
  - `shots_on_target_per_game`: double precision NULL
  - `passes_completed`: integer NULL
  - `pass_accuracy_pct`: double precision NULL
  - ... y 4 más